**[CloudFormation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html) is an AWS service that helps user to model, setup, configure and manage resources.**

- Simplify infrastructure management
- Quickly replicate the infrastructure
- Easily  control and track infrastructure changes 

Below is high-level flow and the basic building blocks of CloudFormation with links to AWS documentation. Some sample templates have been included in this repo for tutorial purpose.

![image-20230303110139095](./images/image-20230303110139095.png)



## CloudFormation Building Blocks

| Component                                                    | Example                                                      | Documentation                                                |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| AWSTemplateFormatVersion: identifies the capabilities of the template | AWSTemplateFormatVersion: "2010-09-09"                       | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/format-version-structure.html |
| Description: Comments about the template                     |                                                              |                                                              |
| Transform: specifies one or more Macros that used to process the template |                                                              | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/transform-section-structure.html |
| Metadata: To provide details about the template implementation Metadata keys<br/>Some AWS CloudFormation features retrieve settings or configuration information that you define in the Metadata section. You define this information in the following AWS CloudFormation-specific metadata keys:<br/><br/>AWS::CloudFormation::Init<br/>Defines configuration tasks for the cfn-init helper script. This script is useful for configuring and installing applications on EC2 instances. For more information, see AWS::CloudFormation::Init.<br/><br/>**AWS::CloudFormation::Interface<br/>***Defines the grouping and ordering of input parameters when they are displayed in the AWS CloudFormation console making the flow more user friendly*. By default, the AWS CloudFormation console alphabetically sorts parameters by their logical ID. For more information, see AWS::CloudFormation::Interface.<br/><br/>AWS::CloudFormation::Designer<br/>Describes how your resources are laid out in AWS CloudFormation Designer (Designer). Designer automatically adds this information when you use it to create and update templates. For more information, see What is AWS CloudFormation Designer?. | Metadata:<br/>  Instances:<br/>    Description: "Information about the instances"<br/>  Databases: <br/>    Description: "Information about the databases" | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/metadata-section-structure.html |
| Resources: AWS resources declared in the template (MANDATORY) | Resources:<br/>  EC2Instance:<br/>    Type: AWS::EC2::Instance<br/>    Properties:<br/>      InstanceType:<br/>        !FindInMap [<br/>          EnvironmentToInstanceType,<br/>          !Ref "EnvironmentName",<br/>          instanceType<br/>        ]<br/>      # Note we use the pseudo parameter AWS::Region<br/>      ImageId: !FindInMap [AWSRegionArch2AMI, !Ref "AWS::Region", HVM64] | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-reference.html |
| Parameters: The dynamic inputs for your template             | Parameters:<br/>  EnvironmentName:<br/>    Description: Environment Name<br/>    Type: String<br/>    AllowedValues: [development, production]<br/>    ConstraintDescription: must be development or production | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html |
| Mappings: The static variables (usually known ahead of time) | Mappings:<br/>  AWSRegionArch2AMI:<br/>    af-south-1:<br/>      HVM64: ami-06db08e8636583118<br/>    ap-east-1:<br/>      HVM64: ami-0921e2da2f22f9617<br/>    ap-northeast-1:<br/>      HVM64: ami-06098fd00463352b6 | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/mappings-section-structure.html |
| Outputs References to what has been created<br/><br/>The output of one stack can be used as the input of another stack<br/>The export name should be unique among the stacks | Outputs:<br/>  StackSSHSecurityGroup:<br/>    Description: The SSH Security Group for our Company<br/>    Value: !Ref MyCompanyWideSSHSecurityGroup<br/>    Export:<br/>      Name: SSHSecurityGroup | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/outputs-section-structure.html |
| Conditionals: List of conditions to perform resource creation | Parameters:<br/>  EnvType:<br/>    Description: Environment type.<br/>    Default: test<br/>    Type: String<br/>    AllowedValues:<br/>      - prod<br/>      - test<br/>    ConstraintDescription: must specify prod or test.<br/><br/>Conditions:<br/>  CreateProdResources: !Equals [!Ref EnvType, prod] | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html |
| Rules: Validate a parameter or a combination of parameters during stack creation/update (Type, Min/MaxLength, Min/MaxValue, AllowedValues, AllowedPattern) | Rules:<br/>  testInstanceType:<br/>    RuleCondition: !Equals <br/>      - !Ref Environment<br/>      - test<br/>    Assertions:<br/>      - Assert:<br/>          'Fn::Contains':<br/>            - - a1.medium<br/>            - !Ref InstanceType<br/>        AssertDescription: 'For a test environment, the instance type must be a1.medium'<br/>  prodInstanceType:<br/>    RuleCondition: !Equals <br/>      - !Ref Environment<br/>      - prod<br/>    Assertions:<br/>      - Assert:<br/>          'Fn::Contains':<br/>            - - a1.large<br/>            - !Ref InstanceType<br/>        AssertDescription: 'For a production environment, the instance type must be a1.large' | https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/rules-section-structure.html |
|                                                              |                                                              |                                                              |

